\documentclass[a4paper,11pt]{book}
%\documentclass[a4paper,twoside,11pt,titlepage]{book}
\usepackage{listings}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}

\usepackage[final]{pdfpages}

% \usepackage[style=list, number=none]{glossary} %
%\usepackage{titlesec}
%\usepackage{pailatino}

\decimalpoint
\usepackage{dcolumn}
\newcolumntype{.}{D{.}{\esperiod}{-1}}
\makeatletter
\addto\shorthandsspanish{\let\esperiod\es@period@code}
\makeatother


%\usepackage[chapter]{algorithm}
\RequirePackage{verbatim}
%\RequirePackage[Glenn]{fncychap}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{afterpage}
\usepackage{wrapfig}
\usepackage{longtable}
\usepackage[pdfborder={000}]{hyperref} %referencia

\usepackage[T1]{fontenc}
\usepackage{charter}
\usepackage{environ}
\usepackage{tikz}
\usetikzlibrary{calc,matrix}

% ********************************************************************
% Re-usable information
% ********************************************************************
\newcommand{\myTitle}{Proyecto SinTime\xspace}
\newcommand{\mySubtitle}{Aplicacion Web Gamificada de Docendia}
\newcommand{\myDegree}{Grado en Ingeniería Informática\xspace}
\newcommand{\myName}{Álvaro Fernández-Alonso Araluce (alumno)\xspace}
\newcommand{\myProf}{Juan Manuel Fernández Luna (tutor1)\xspace}
\newcommand{\myOtherProf}{Isaac José Pérez López (tutor2)\xspace}
%\newcommand{\mySupervisor}{Put name here\xspace}
\newcommand{\myFaculty}{Escuela Técnica Superior de Ingenierías Informática y de
Telecomunicación\xspace}
\newcommand{\myFacultyShort}{E.T.S. de Ingenierías Informática y de
Telecomunicación\xspace}
\newcommand{\myDepartment}{Departamento de ...\xspace}
\newcommand{\myUni}{\protect{Universidad de Granada}\xspace}
\newcommand{\myLocation}{Granada\xspace}
\newcommand{\myTime}{\today\xspace}
\newcommand{\myVersion}{Version 0.1\xspace}
\newcommand{\myKeyWords}{SinTime, SinTime\_Wars, docencia, gamificación}


\hypersetup{
pdfauthor = {\myName (araluce (en) correo (punto) ugr (punto) es)},
pdftitle = {\myTitle},
pdfsubject = {},
pdfkeywords = {SinTime, SinTime\_Wars, docencia, gamificación, ...},
pdfcreator = {LaTeX con el paquete ....},
pdfproducer = {pdflatex}
}

%\hyphenation{}


%\usepackage{doxygen/doxygen}
%\usepackage{pdfpages}
\usepackage{url}
\usepackage{colortbl,longtable}
\usepackage[stable]{footmisc}
\usepackage{dirtree}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{acro}


%Acronimos
\DeclareAcronym{TdV}{
short = TdV ,
long = Tiempo de Vida,
class = abbrev
}
\DeclareAcronym{Guidoogway}{
short = Maestro Guidoogway ,
long = Profesor en el papel de ``Guardián del Tiempo'',
class = abbrev
}
\DeclareAcronym{Padawan}{
short = Padawan ,
long = Alumno en el papel de ``Ciudadano SinTime'',
class = abbrev
}
\DeclareAcronym{Metronomista}{
short = Metronomista ,
long = Sistema en el papel de ``Metronomista'',
class = abbrev
}

\DeclareAcronym{Reto}{
	short = Reto ,
	long = Ejercicio,
	class = abbrev
}

\DeclareAcronym{Badge}{
	short = Badge ,
	long = Calificación,
	class = abbrev
}

%\usepackage{index}

%\makeindex
%\usepackage[style=long, cols=2,border=plain,toc=true,number=none]{glossary}
% \makeglossary

% Definición de comandos que me son tiles:
%\renewcommand{\indexname}{Índice alfabético}
%\renewcommand{\glossaryname}{Glosario}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[LO]{\leftmark}
\fancyhead[RE]{\rightmark}
\fancyhead[RO,LE]{\textbf{\thepage}}
\renewcommand{\chaptermark}[1]{\markboth{\textbf{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\textbf{\thesection. #1}}}

\setlength{\headheight}{1.5\headheight}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
%Definimos los tipos teorema, ejemplo y definición podremos usar estos tipos
%simplemente poniendo \begin{teorema} \end{teorema} ...
\newtheorem{teorema}{Teorema}[chapter]
\newtheorem{ejemplo}{Ejemplo}[chapter]
\newtheorem{definicion}{Definición}[chapter]

\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
\definecolor{gray30}{gray}{.94}

\lstset{ frame=Ltb,
     framerule=0.5pt,
     aboveskip=0.5cm,
     framextopmargin=3pt,
     framexbottommargin=3pt,
     framexleftmargin=0.1cm,
     framesep=0pt,
     rulesep=.4pt,
     backgroundcolor=\color{gray97},
     rulesepcolor=\color{black},
     %
     stringstyle=\ttfamily,
     showstringspaces = false,
     basicstyle=\scriptsize\ttfamily,
     commentstyle=\color{gray45},
     keywordstyle=\bfseries,
     %
     numbers=left,
     numbersep=6pt,
     numberstyle=\tiny,
     numberfirstline = false,
     breaklines=true,
   }
 
% minimizar fragmentado de listados
\lstnewenvironment{listing}[1][]
   {\lstset{#1}\pagebreak[0]}{\pagebreak[0]}

\lstdefinestyle{CodigoC}
   {
	basicstyle=\scriptsize,
	frame=single,
	language=C,
	numbers=left
   }
\lstdefinestyle{CodigoC++}
   {
	basicstyle=\small,
	frame=single,
	backgroundcolor=\color{gray30},
	language=C++,
	numbers=left
   }

 
\lstdefinestyle{Consola}
   {basicstyle=\scriptsize\bf\ttfamily,
    backgroundcolor=\color{gray30},
    frame=single,
    numbers=none
   }


\newcommand{\bigrule}{\titlerule[0.5mm]}


%Para conseguir que en las páginas en blanco no ponga cabecerass
\makeatletter
\def\clearpage{%
  \ifvmode
    \ifnum \@dbltopnum =\m@ne
      \ifdim \pagetotal <\topskip
        \hbox{}
      \fi
    \fi
  \fi
  \newpage
  \thispagestyle{empty}
  \write\m@ne{}
  \vbox{}
  \penalty -\@Mi
}
\makeatother

% code by Andrew:
% http://tex.stackexchange.com/a/28452/13304
\makeatletter
\let\matamp=&
\catcode`\&=13
\makeatletter
\def&{\iftikz@is@matrix
	\pgfmatrixnextcell
	\else
	\matamp
	\fi}
\makeatother

\newcounter{lines}
\def\endlr{\stepcounter{lines}\\}

\newcounter{vtml}
\setcounter{vtml}{0}

\newif\ifvtimelinetitle
\newif\ifvtimebottomline
\tikzset{description/.style={
		column 2/.append style={#1}
	},
	timeline color/.store in=\vtmlcolor,
	timeline color=red!80!black,
	timeline color st/.style={fill=\vtmlcolor,draw=\vtmlcolor},
	use timeline header/.is if=vtimelinetitle,
	use timeline header=false,
	add bottom line/.is if=vtimebottomline,
	add bottom line=false,
	timeline title/.store in=\vtimelinetitle,
	timeline pretitle/.store in=\vtimelinepretitle,
	timeline title={},
	line offset/.store in=\lineoffset,
	line offset=4pt,
}

\NewEnviron{vtimeline}[1][]{%
	\setcounter{lines}{1}%
	\stepcounter{vtml}%
	\begin{tikzpicture}[column 1/.style={anchor=east},
	column 2/.style={anchor=west},
	text depth=0pt,text height=1ex,
	row sep=1ex,
	column sep=1em,
	#1
	]
	\matrix(vtimeline\thevtml)[matrix of nodes]{\BODY};
	\pgfmathtruncatemacro\endmtx{\thelines-1}
	\path[timeline color st] 
	($(vtimeline\thevtml-1-1.north east)!0.5!(vtimeline\thevtml-1-2.north west)$)--
	($(vtimeline\thevtml-\endmtx-1.south east)!0.5!(vtimeline\thevtml-\endmtx-2.south west)$);
	\foreach \x in {1,...,\endmtx}{
		\node[circle,timeline color st, inner sep=0.15pt, draw=white, thick] 
		(vtimeline\thevtml-c-\x) at 
		($(vtimeline\thevtml-\x-1.east)!0.5!(vtimeline\thevtml-\x-2.west)$){};
		\draw[timeline color st](vtimeline\thevtml-c-\x.west)--++(-3pt,0);
	}
	\ifvtimelinetitle%
	\draw[timeline color st]([yshift=\lineoffset]vtimeline\thevtml.north west)--
	([yshift=\lineoffset]vtimeline\thevtml.north east);
	\node[anchor=west,yshift=16pt,font=\large]
	at (vtimeline\thevtml-1-1.north west) 
	{\textsc{\vtimelinepretitle}: \textit{\vtimelinetitle}};
	\else%
	\relax%
	\fi%
	\ifvtimebottomline%
	\draw[timeline color st]([yshift=-\lineoffset]vtimeline\thevtml.south west)--
	([yshift=-\lineoffset]vtimeline\thevtml.south east);
	\else%
	\relax%
	\fi%
	\end{tikzpicture}
}

\usepackage{pdfpages}

\lstloadlanguages{Ruby}
\lstset{%
	basicstyle=\ttfamily\color{black},
	commentstyle = \ttfamily\color{red},
	keywordstyle=\ttfamily\color{blue},
	stringstyle=\color{orange}}

\begin{document}
\input{portada/portada}
\input{prefacios/prefacio}
\frontmatter
\tableofcontents
\listoffigures
\listoftables

%\mainmatter
%\setlength{\parskip}{5pt}
\input{capitulos/01_Introduccion}

\input{capitulos/02_Planificacion}

\input{capitulos/03_Presupuesto}

\input{capitulos/04_Plan_de_entregas}

\input{capitulos/05_Tecnologias}

\input{capitulos/06_Diseno}

\input{capitulos/07_Analisis}
%
%\input{capitulos/07_Implementacion}
%
%\input{capitulos/08_Pruebas}
%
%\input{capitulos/09_Conclusiones}

\input{capitulos/08_Prensa}

%%\chapter{Conclusiones y Trabajos Futuros}
%
%
%%\nocite{*}
%\bibliography{bibliografia/bibliografia}\addcontentsline{toc}{chapter}{Bibliografía}
%\bibliographystyle{miunsrturl}
%
%\appendix
%\input{apendices/manual_usuario/manual_usuario}
%%\input{apendices/paper/paper}
%\input{glosario/entradas_glosario}
% \addcontentsline{toc}{chapter}{Glosario}
% \printglossary

\chapter*{}
\thispagestyle{empty}
\newpage
\bibliographystyle{acm} % hay varias formas de citar
\bibliography{citas} %archivo citas.bib que contiene las entradas 

\end{document}
